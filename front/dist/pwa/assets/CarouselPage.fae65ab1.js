import{_ as f,o as h,k as m,w as s,y as C,a as o,f as r,g as b,i as w,j as u,z as d,t as g,A as v,Q as k,n as y,p as c,B as x,q as Q,v as V,e as D}from"./index.0cff0be1.js";const S={name:"CarouselPage",data(){return{carousels:[],carousel:{},dialog:!1,loading:!1,columns:[{name:"id",label:"ID",align:"center",field:e=>e.id},{name:"image",label:"Imagen",align:"left",field:e=>e.image},{name:"status",label:"Estado",align:"center",field:e=>e.status},{name:"tipo",label:"Tipo",align:"center",field:e=>e.tipo}]}},mounted(){this.getCarousels()},methods:{fileChange(e){this.carousel.image=e.target.files[0]},carouselCreate(){this.dialog=!0,this.carousel={image:"",status:"active"}},getCarousels(){this.$axios.get("carousels").then(e=>{this.carousels=e.data}).catch(e=>{console.log(e)})},carouselSave(){if(!this.carousel.image)return this.$alert.error("Debe seleccionar una imagen"),!1;if(this.carousel.id){this.loading=!0;const e=new FormData;e.append("file",this.carousel.image),e.append("tipo",this.carousel.tipo),this.$axios.post("carouselsFile/"+this.carousel.id,e,{headers:{"Content-Type":"multipart/form-data"}}).then(l=>{this.getCarousels(),this.dialog=!1}).catch(l=>{this.$alert.error(l.response.data.message)}).finally(()=>{this.loading=!1})}else{this.loading=!0;const e=new FormData;e.append("file",this.carousel.image),e.append("tipo",this.carousel.tipo),this.$axios.post("carousels",e,{headers:{"Content-Type":"multipart/form-data"}}).then(l=>{this.getCarousels(),this.dialog=!1}).catch(l=>{console.log(l)}).finally(()=>{this.loading=!1})}},carouselDelete(e){this.$axios.delete("carousels/"+e.id).then(l=>{this.getCarousels()}).catch(l=>{console.log(l)})},carouselEdit(e,l){this.dialog=!0,this.carousel=l},carouselUpdate(e,l){l.stopPropagation(),this.loading=!0,e.status=e.status==="active"?"inactive":"active",this.$axios.put("carousels/"+e.id,e).then(n=>{console.log(n.data),this.dialog=!1}).catch(n=>{console.log(n)}).finally(()=>{this.loading=!1})},carouselSubmit(){this.carousel.id?this.carouselUpdate():this.carouselSave()}}};function T(e,l,n,q,t,i){return h(),m(C,{class:"q-pa-xs bg-grey-3"},{default:s(()=>[o(k,{dense:"",filter:e.filter,title:"Gestion carosel",rows:t.carousels,columns:t.columns,"row-key":"name","rows-per-page-options":[50,100],onRowClick:i.carouselEdit},{"top-right":s(()=>[o(r,{label:"Nuevo carucel",color:"positive",onClick:i.carouselCreate,icon:"add_circle",class:"q-mb-xs","no-caps":""},null,8,["onClick"]),o(b,{outlined:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":l[0]||(l[0]=a=>e.filter=a),placeholder:"Search"},{append:s(()=>[o(w,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-opcion":s(a=>[o(u,{key:"opcion",props:a,"auto-width":""},null,8,["props"])]),"body-cell-id":s(a=>[o(u,{key:"id",props:a,"auto-width":""},{default:s(()=>[d(g(a.row.id),1)]),_:2},1032,["props"])]),"body-cell-image":s(a=>[o(u,{key:"image",props:a,"auto-width":"",class:"text-center"},{default:s(()=>[o(v,{src:`${e.$url}../images/${a.row.image}`,width:"100px"},null,8,["src"])]),_:2},1032,["props"])]),"body-cell-status":s(a=>[o(u,{key:"status",props:a,"auto-width":""},{default:s(()=>[o(r,{rounded:"",size:"10px","no-caps":"",onClick:p=>i.carouselUpdate(a.row,p),color:a.row.status==="active"?"positive":"negative",label:a.row.status,"text-color":"white"},null,8,["onClick","color","label"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","columns","onRowClick"]),o(D,{modelValue:t.dialog,"onUpdate:modelValue":l[5]||(l[5]=a=>t.dialog=a),persistent:""},{default:s(()=>[o(y,null,{default:s(()=>[o(c,null,{default:s(()=>[o(c,{class:"q-pa-none text-bold row"},{default:s(()=>[d(g(t.carousel.id?"Editar":"Nuevo")+" carosel ",1),o(x),o(r,{flat:"",round:"",dense:"",icon:"close",onClick:l[1]||(l[1]=a=>t.dialog=!1)})]),_:1}),o(c,null,{default:s(()=>[Q("input",{placeholder:"Imagen",type:"file",accept:"image/*",onChange:l[2]||(l[2]=(...a)=>i.fileChange&&i.fileChange(...a))},null,32),o(V,{outlined:"",modelValue:t.carousel.tipo,"onUpdate:modelValue":l[3]||(l[3]=a=>t.carousel.tipo=a),options:["Normal","Mini","Medio"],label:"Tipo",dense:""},null,8,["modelValue"])]),_:1}),o(c,{class:"text-right"},{default:s(()=>[o(r,{label:t.carousel.id?"Actualizar":"Guardar",color:t.carousel.id?"orange":"positive",onClick:i.carouselSave,loading:t.loading,icon:t.carousel.id?"edit":"save",class:"q-mb-xs","no-caps":""},null,8,["label","color","onClick","loading","icon"]),o(r,{label:"Cancelar",color:"negative",onClick:l[4]||(l[4]=a=>t.dialog=!1),icon:"cancel",loading:t.loading,class:"q-mb-xs","no-caps":""},null,8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var N=f(S,[["render",T]]);export{N as default};
