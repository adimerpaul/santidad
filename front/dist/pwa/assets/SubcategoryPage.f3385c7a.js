import{_ as p,d as f,r as h,o as n,c as b,a as e,w as i,Q as _,e as y,f as s,g as d,i as C,j as c,k as w,l as k,m as S,n as v,p as u,q as x,t as V,s as Q,v as D,x as q}from"./index.aeb1807b.js";const N={name:"UserPage",data(){return{dialogSubcategoria:!1,categorias:[],alert:!1,dialog_mod:!1,dialog_del:!1,fecha:f.formatDate(new Date,"YYYY-MM-DD"),filter:"",dato:{},model:"",dato2:{},options:[],option:"",props:[],unidades:[],permisos:[],permisos2:[],modelpermiso:!1,uni:{},columns:[{name:"opcion",label:"Opciones",field:"opcion",sortable:!1},{name:"id",align:"left",label:"Id",field:"id",sortable:!0},{name:"name",align:"left",label:"Nombre",field:"name",sortable:!0},{name:"category_id",align:"left",label:"Categoria",field:"category_id",sortable:!0}],data:[]}},created(){this.misdatos(),this.$axios.get("categories").then(a=>{this.categorias=a.data})},methods:{formSubcategoria(){this.option==="create"?this.$axios.post("subcategories",this.dato).then(()=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Registrado correctamente"}),this.dialogSubcategoria=!1,this.misdatos()}).catch(a=>{this.$q.notify({message:a.response.data.message,icon:"error",color:"red"})}):this.$axios.put("subcategories/"+this.dato.id,this.dato).then(()=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Editado correctamente"}),this.dialogSubcategoria=!1,this.misdatos()}).catch(a=>{this.$q.notify({message:a.response.data.message,icon:"error",color:"red"})})},regDialog(){this.dialogSubcategoria=!0,this.option="create",this.dato={}},misdatos(){this.$axios.get("subcategories").then(a=>{this.data=a.data})},editRow(a){this.option="edit",this.dato={id:a.row.id,name:a.row.name,category_id:a.row.category_id},this.dialogSubcategoria=!0},deleteRow(a){this.$q.dialog({title:"ELIMINAR UNIDAD",message:"\xBFEsta seguro de eliminar la unidad?",cancel:!0,persistent:!0}).onOk(()=>{this.$axios.delete("subcategories/"+a.row.id).then(()=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.misdatos()}).catch(l=>{this.$q.notify({message:l.response.data.message,icon:"error",color:"red"})})}).onCancel(()=>{}).onDismiss(()=>{})}}},R={class:"q-pa-md"},U={class:"text-h6"};function B(a,l,E,I,t,r){const g=h("q-card-title");return n(),b("div",R,[e(_,{dense:"",filter:t.filter,title:"Control subcategorias",rows:t.data,columns:t.columns,"row-key":"name","rows-per-page-options":[0]},{"top-right":i(()=>[e(s,{label:"Actualizar",color:"grey",onClick:r.misdatos,size:"sm",icon:"refresh","no-caps":""},null,8,["onClick"]),e(s,{label:"Nuevo Unidad",color:"positive",onClick:r.regDialog,icon:"add_circle_outline","no-caps":""},null,8,["onClick"]),e(d,{outlined:"",dense:"",debounce:"300",modelValue:t.filter,"onUpdate:modelValue":l[0]||(l[0]=o=>t.filter=o),placeholder:"Buscar..."},{append:i(()=>[e(C,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-category_id":i(o=>[e(c,{key:"categoria_id",props:o},{default:i(()=>[o.row.category_id?(n(),w(k,{key:0,label:o.row.category.name,color:"primary","text-color":"white"},null,8,["label"])):S("",!0)]),_:2},1032,["props"])]),"body-cell-opcion":i(o=>[e(c,{key:"opcion",props:o,"auto-width":""},{default:i(()=>[e(s,{dense:"",round:"",flat:"",color:"yellow",onClick:m=>r.editRow(o),icon:"edit"},null,8,["onClick"]),e(s,{dense:"",round:"",flat:"",color:"red",onClick:m=>r.deleteRow(o),icon:"delete"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","columns"]),e(y,{modelValue:t.dialogSubcategoria,"onUpdate:modelValue":l[4]||(l[4]=o=>t.dialogSubcategoria=o)},{default:i(()=>[e(v,null,{default:i(()=>[e(u,null,{default:i(()=>[e(g,null,{default:i(()=>[x("div",U,V(t.option==="create"?"Nueva Subcategoria":"Editar Subcategoria"),1)]),_:1}),e(u,null,{default:i(()=>[e(Q,{onSubmit:r.formSubcategoria},{default:i(()=>[e(d,{modelValue:t.dato.name,"onUpdate:modelValue":l[1]||(l[1]=o=>t.dato.name=o),outlined:"",label:"Nombre"},null,8,["modelValue"]),e(D,{modelValue:t.dato.category_id,"onUpdate:modelValue":l[2]||(l[2]=o=>t.dato.category_id=o),options:t.categorias,outlined:"",label:"Categoria","emit-value":"","map-options":"","option-label":"name","option-value":"id"},null,8,["modelValue","options"]),e(q,{align:"right"},{default:i(()=>[e(s,{label:"Cancelar",color:"negative",onClick:l[3]||(l[3]=o=>t.dialogSubcategoria=!1)}),e(s,{label:"Registrar",color:"positive",type:"submit"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var Y=p(N,[["render",B]]);export{Y as default};
