import{_ as L,d as Y,o as g,k as S,w as l,y as H,q as a,a as e,i as P,g as v,z as U,A as c,f as u,v as y,B as C,C as h,p,c as b,D as G,m as q,F as z,G as E,n as f,H as J,t as n,J as Q,K,Q as R,L as F,j as V,M as T,O as B,P as W,R as A,S as w,s as O,T as I,U as X,V as Z,W as j,e as N,X as D,x as $,Y as M,Z as k,$ as ee,a0 as oe}from"./index.6af9888c.js";const de={name:"PedidosPage",data(){return{agencia_id:parseInt(localStorage.getItem("agencia_id")),agenciaNombre:"",pedidoDialog:!1,proveedorFiltro:null,dialogStock:!1,productStockSelected:{},pedido:{solicitante:"",observacion:"",proveedor_id:null,vendedor_id:null},dialogVendedor:!1,loadingVendedor:!1,nuevoVendedor:{nombre:"",celular:""},proveedores:[],proveedoresAll:[],vendedores:[],current_page:1,last_page:1,ruleNumber:[i=>i!==null&&i!==""||"Por favor escriba su cantidad",i=>i>=0&&i<1e4||"Por favor escriba una cantidad real"],search:"",loading:!1,products:[],totalProducts:0,agencias:[],productosPedido:[],category:0,categories:[{name:"Ver todas las categorias",id:0}],order:"cantidad desc",columnsPedidos:[{label:"borrar",field:"borrar",name:"borrar",align:"left"},{label:"nombre",field:"nombre",name:"nombre",align:"left"},{label:"cantidadPedida",field:"cantidadPedida",name:"cantidadPedida"}],columnsResumenPedido:[{name:"producto",label:"Producto",field:"nombre",align:"left"},{name:"stock",label:"Stock Actual",field:"cantidad",align:"center"},{name:"cantidad",label:"Cantidad Pedida",field:"cantidadPedida",align:"center"}],orders:[{label:"Ordenar por",value:"id"},{label:"Menor precio",value:"precio asc"},{label:"Mayor precio",value:"precio desc"},{label:"Menor cantidad",value:"cantidad asc"},{label:"Mayor cantidad",value:"cantidad desc"},{label:"Orden alfabetico",value:"nombre asc"}],subcategories:[],subcategoria:""}},computed:{totalItemsPedido(){let i=0;return this.productosPedido.forEach(t=>{i+=parseInt(t.cantidadPedida||0)}),i},nombreProveedorActual(){if(!this.pedido.proveedor_id)return"";const i=this.proveedoresAll.find(t=>t.id===this.pedido.proveedor_id);return i?i.nombreRazonSocial:""}},async mounted(){await this.cargarInformacionUsuario(),this.productsGet(),this.categoriesGet(),this.subcategoriesGet(),this.proveedoresGet()},methods:{verStockGlobal(i){this.productStockSelected=i,this.dialogStock=!0},proveedoresGet(){this.$axios.get("providers").then(i=>{this.proveedores=i.data,this.proveedoresAll=i.data}).catch(i=>{console.error("Error cargando proveedores",i)})},filterProveedores(i,t,r){if(i===""){t(()=>{this.proveedores=this.proveedoresAll});return}const m=i.toLowerCase();t(()=>{this.proveedores=this.proveedoresAll.filter(d=>d.nombreRazonSocial.toLowerCase().indexOf(m)>-1)})},cargarVendedores(i){this.pedido.vendedor_id=null,this.vendedores=[],i&&this.$axios.get(`vendedores-por-proveedor/${i}`).then(t=>{this.vendedores=t.data,this.vendedores.length===1&&(this.pedido.vendedor_id=this.vendedores[0].id)}).catch(t=>{console.error(t)})},async cargarInformacionUsuario(){try{const i=await this.$axios.get("agencias");this.agencias=i.data;const t=this.agencias.find(r=>r.id===this.agencia_id);if(t&&(this.agenciaNombre=t.nombre),this.$store.user&&this.$store.user.name)this.pedido.solicitante=this.$store.user.name;else try{const r=await this.$axios.get(`users/agencia/${this.agencia_id}`);r.data&&r.data.length>0&&(this.pedido.solicitante=r.data[0].name||"")}catch{console.log("No se pudo obtener usuarios de la agencia, usando valor por defecto"),this.pedido.solicitante="Usuario Sucursal "+this.agencia_id}}catch(i){console.error("Error al cargar informaci\xF3n del usuario:",i),this.agenciaNombre="Sucursal "+this.agencia_id,this.pedido.solicitante="Usuario Sucursal "+this.agencia_id}},getProductCardClass(i){return"bg-white cursor-pointer"},getStockTextClass(i){return i.cantidad<=0?"text-center text-bold text-red":i.cantidad<=5?"text-center text-bold text-orange":"text-center text-bold"},getCantidadEnPedido(i){const t=this.productosPedido.find(r=>r.id===i);return t?t.cantidadPedida:0},clickAddPedido(i){const t=this.productosPedido.find(r=>r.id===i.id);if(t)t.cantidadPedida++;else{const r={...i,cantidadPedida:1};this.productosPedido.push(r)}},addCantidadPedido(i,t){i.cantidadPedida++},removeCantidadPedido(i,t){i.cantidadPedida--,i.cantidadPedida<=0&&this.productosPedido.splice(t,1)},cambioNumeroPedido(i,t){if(i.cantidadPedida!==""){const r=parseInt(i.cantidadPedida);isNaN(r)||(i.cantidadPedida=r),r<=0&&this.productosPedido.splice(t,1)}},deleteProductoPedido(i,t){this.productosPedido.splice(t,1)},vaciarPedido(){this.$q.dialog({title:"Vaciar pedido",message:"\xBFEst\xE1s seguro de vaciar todo el pedido?",cancel:!0,persistent:!0}).onOk(()=>{this.productosPedido=[]})},clickConfirmarPedido(){if(this.productosPedido.length===0){this.$q.notify({color:"negative",message:"No hay productos en el pedido",icon:"warning"});return}let i=!1;this.productosPedido.forEach(t=>{(!t.cantidadPedida||t.cantidadPedida<=0)&&(this.$alert.error(`La cantidad de "${t.nombre}" debe ser mayor a 0.`),i=!0)}),!i&&(this.pedidoDialog=!0)},pedidoInsert(){var r;if(!this.pedido.proveedor_id){this.$q.notify({color:"warning",message:"Debe seleccionar un proveedor"});return}this.loading=!0;const i=Y.formatDate(Date.now(),"YYYY-MM-DD HH:mm:ss"),t={agencia_id:this.agencia_id,user_id:((r=this.$store.user)==null?void 0:r.id)||null,fecha_pedido:i,estado:"PENDIENTE",observacion:this.pedido.observacion,proveedor_id:this.pedido.proveedor_id,vendedor_id:this.pedido.vendedor_id,detalles:this.productosPedido.map(m=>({product_id:m.id,cantidad:m.cantidadPedida}))};this.$axios.post("pedidos",t).then(m=>{this.loading=!1,this.$alert.success("Pedido realizado con \xE9xito"),this.pedidoDialog=!1,this.productosPedido=[],this.pedido.observacion="",this.pedido.proveedor_id=null,this.productsGet()}).catch(m=>{var d,s;this.loading=!1,this.$alert.error(((s=(d=m.response)==null?void 0:d.data)==null?void 0:s.message)||"Error al realizar el pedido")})},subcategoriesGet(){this.$axios.get("subcategories").then(i=>{this.subcategories=i.data}).catch(i=>{console.log(i)})},categoriesGet(){this.categories=[{name:"Ver todas las categorias",id:0}],this.$axios.get("categories").then(i=>{this.categories=this.categories.concat(i.data)}).catch(i=>{console.log(i)})},productsGet(){this.loading=!0,this.products=[],this.$axios.get(`productsSale?page=${this.current_page}&search=${this.search}&order=${this.order}&category=${this.category}&agencia=${this.agencia_id}&subcategory=${this.subcategoria}&proveedor=${this.proveedorFiltro||0}`).then(i=>{this.loading=!1,this.totalProducts=i.data.products.total,this.last_page=i.data.products.last_page,this.current_page=i.data.products.current_page,i.data.products.data.forEach(t=>{t.cantidadPedida=this.getCantidadEnPedido(t.id),this.products.push(t)})}).catch(i=>{this.loading=!1,console.log(i)})},abrirDialogoVendedor(){if(!this.pedido.proveedor_id){this.$q.notify({color:"warning",message:"Primero debes seleccionar un Proveedor",icon:"warning"});return}this.nuevoVendedor={nombre:"",celular:""},this.dialogVendedor=!0},guardarNuevoVendedor(){this.loadingVendedor=!0;const i={...this.nuevoVendedor,client_id:this.pedido.proveedor_id};this.$axios.post("vendedores",i).then(t=>{const r=t.data;this.vendedores.push(r),this.pedido.vendedor_id=r.id,this.$alert.success("Vendedor creado y seleccionado"),this.dialogVendedor=!1}).catch(t=>{var r,m;console.error(t),this.$alert.error(((m=(r=t.response)==null?void 0:r.data)==null?void 0:m.message)||"Error al crear vendedor")}).finally(()=>{this.loadingVendedor=!1})}}},_=i=>(ee("data-v-68f69dc4"),i=i(),oe(),i),te={class:"row"},le={class:"col-12 col-md-8"},ie={class:"row"},ae={class:"col-12 col-md-6 bg-white q-pa-xs"},se={class:"col-12 col-md-6 flex q-pa-xs"},re={class:"col-12 col-md-2 q-pa-xs"},ne={class:"col-12 col-md-2 q-pa-xs"},ce={class:"col-12 col-md-3 q-pa-xs"},ue={class:"col-12 col-md-2 q-pa-xs"},pe={class:"col-12 col-md-3 q-pa-xs"},ge={class:"col-12"},me={key:0,class:"row justify-center q-py-sm"},he={key:1,class:"row cursor-pointer"},_e={class:"absolute-bottom text-center text-subtitle2",style:{padding:"4px 0px","line-height":"1.1",background:"rgba(0,0,0,0.6)"}},ve={class:"text-center text-subtitle2"},be={class:"row items-center justify-center q-gutter-x-xs full-width"},fe={key:0,class:"text-center text-caption text-lead"},xe={key:2,class:"row justify-center q-mt-md q-pb-md"},Pe={class:"row"},ye={class:"col-12 flex flex-center"},Ve=_(()=>a("div",{class:"col-12"},[a("div",{class:"text-bold text-grey text-center"},"No encontramos productos para tu b\xFAsqueda."),a("div",{class:"text-bold text-grey text-center"},"Intenta con otra palabra o revisa tu Inventario.")],-1)),we={class:"col-12 col-md-4"},ke={class:"row"},Se={class:"col-6 text-h6 q-pt-xs q-pl-lg"},Ce={class:"col-6 text-right"},qe={key:0,class:"flex flex-center q-pa-lg"},Ie=_(()=>a("div",{class:"q-pa-lg text-grey text-center noSelect"}," A\xFAn no tienes productos en tu pedido. Haz clic sobre un producto para agregarlo. ",-1)),Ue={style:{"padding-left":"42px"}},Qe={class:"text-caption",style:{"max-width":"120px","white-space":"normal","overflow-wrap":"break-word","line-height":"0.9"}},Ae={class:"text-grey"},Ne={class:"text-right text-grey-8 text-bold"},De={class:"row"},Ge=_(()=>a("div",{class:"col-7 text-grey"},"Productos diferentes",-1)),ze={class:"col-5 text-right"},Ee=_(()=>a("div",{class:"col-7 text-grey"},"Total unidades",-1)),Re={class:"col-5 text-right text-green"},Fe=_(()=>a("div",{class:"text-h6"},"Realizar pedido",-1)),Te={class:"row q-col-gutter-md"},Be={class:"col-12 col-md-6"},Oe={class:"col-12 col-md-6"},je={class:"col-12"},Me={class:"col-12"},Le={class:"col-12"},Ye={class:"row"},He={class:"col-12"},Je=_(()=>a("div",{class:"text-h6 text-center"},"Resumen del Pedido",-1)),Ke={class:"col-12 q-pt-md"},We={class:"text-subtitle1 text-center"},Xe={class:"row"},Ze={class:"col-6"},$e={class:"col-6"},eo=_(()=>a("div",{class:"text-h6"},"Nuevo Vendedor",-1)),oo={class:"row q-col-gutter-sm"},to={class:"col-12"},lo=_(()=>a("div",{class:"text-caption text-grey"},"Proveedor asociado:",-1)),io={class:"text-bold"},ao={class:"col-12"},so={class:"col-12"},ro={class:"row justify-end q-mt-md"},no={class:"text-h6 ellipsis"},co=_(()=>a("div",{class:"text-subtitle2 q-mb-sm text-center text-grey-8"},"Disponibilidad en Sucursales",-1));function uo(i,t,r,m,d,s){return g(),S(H,{class:"bg-grey-2 q-pa-xs"},{default:l(()=>[a("div",te,[a("div",le,[a("div",ie,[a("div",ae,[e(v,{outlined:"",modelValue:d.search,"onUpdate:modelValue":[t[0]||(t[0]=o=>d.search=o),t[1]||(t[1]=o=>{d.current_page=1,s.productsGet()})],label:"Buscar producto",dense:"",clearable:"",debounce:"500"},{prepend:l(()=>[e(P,{name:"search",class:"cursor-pointer"})]),_:1},8,["modelValue"])]),a("div",se,[e(u,{loading:d.loading,icon:"refresh",dense:"",label:"Actualizar",color:"indigo","no-caps":"",class:"text-bold",onClick:s.productsGet},{default:l(()=>[e(U,null,{default:l(()=>[c("Actualizar")]),_:1})]),_:1},8,["loading","onClick"])]),a("div",re,[e(y,{class:"bg-white","emit-value":"","map-options":"",dense:"",outlined:"",modelValue:d.category,"onUpdate:modelValue":[t[2]||(t[2]=o=>d.category=o),t[3]||(t[3]=o=>{d.current_page=1,s.productsGet()})],"option-value":"id","option-label":"name",options:d.categories,label:"Categor\xEDa"},null,8,["modelValue","options"])]),a("div",ne,[e(y,{class:"bg-white","emit-value":"","map-options":"",dense:"",outlined:"",modelValue:d.subcategoria,"onUpdate:modelValue":[t[4]||(t[4]=o=>d.subcategoria=o),t[5]||(t[5]=o=>{d.current_page=1,s.productsGet()})],"option-value":"id","option-label":"name",options:d.subcategories,label:"Subcategor\xEDa"},null,8,["modelValue","options"])]),a("div",ce,[e(y,{class:"bg-white",dense:"",outlined:"",modelValue:d.proveedorFiltro,"onUpdate:modelValue":[t[6]||(t[6]=o=>d.proveedorFiltro=o),t[7]||(t[7]=o=>{d.current_page=1,s.productsGet()})],options:d.proveedores,"option-value":"id","option-label":"nombreRazonSocial","emit-value":"","map-options":"",clearable:"","use-input":"",onFilter:s.filterProveedores,label:"Filtrar por Proveedor"},{"no-option":l(()=>[e(C,null,{default:l(()=>[e(h,{class:"text-grey"},{default:l(()=>[c("Sin resultados")]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter"])]),a("div",ue,[e(y,{class:"bg-white",label:"Ordenar",dense:"",outlined:"",modelValue:d.order,"onUpdate:modelValue":[t[8]||(t[8]=o=>d.order=o),s.productsGet],options:d.orders,"map-options":"","emit-value":"","option-value":"value","option-label":"label"},null,8,["modelValue","options","onUpdate:modelValue"])]),a("div",pe,[e(v,{dense:"",outlined:"",readonly:"","model-value":d.agenciaNombre,label:"Sucursal","bg-color":"white"},null,8,["model-value"])]),a("div",ge,[e(f,null,{default:l(()=>[e(p,{class:"q-pa-none"},{default:l(()=>[d.last_page>1?(g(),b("div",me,[e(G,{modelValue:d.current_page,"onUpdate:modelValue":[t[9]||(t[9]=o=>d.current_page=o),s.productsGet],max:d.last_page,"max-pages":6,"boundary-numbers":"","direction-links":"",color:"indigo","active-color":"indigo","active-text-color":"white",dense:""},null,8,["modelValue","max","onUpdate:modelValue"])])):q("",!0),d.products.length>0?(g(),b("div",he,[(g(!0),b(z,null,E(d.products,o=>(g(),b("div",{class:"col-4 col-md-2",key:o.id},[e(f,{onClick:x=>s.clickAddPedido(o),class:M(["q-pa-xs",s.getProductCardClass(o)]),flat:"",bordered:""},{default:l(()=>[e(T,{src:o.imagen.includes("http")?o.imagen:`${i.$url}../images/${o.imagen}`,width:"100%",height:"160px",fit:"contain",class:"bg-white q-pa-sm"},{default:l(()=>[o.porcentaje?(g(),S(D,{key:0,color:"red",floating:"",style:{padding:"5px 8px",margin:"0px"}},{default:l(()=>[c(n(o.porcentaje)+"% ",1)]),_:2},1024)):q("",!0),a("div",_e,n(i.$filters.capitalize(o.nombre)),1)]),_:2},1032,["src"]),e(p,{class:"q-pa-none q-ma-none"},{default:l(()=>[a("div",ve,n(o.precio)+" Bs ",1),a("div",be,[a("div",{class:M(s.getStockTextClass(o))},n(o.cantidad)+" "+n(i.$q.screen.lt.md?"Dis":"Disponible"),3),e(u,{dense:"",flat:"",round:"",icon:"visibility",color:"indigo",size:"xs",onClick:I(x=>s.verStockGlobal(o),["stop"])},{default:l(()=>[e(U,null,{default:l(()=>[c("Ver stock en todas las sucursales")]),_:1})]),_:2},1032,["onClick"])]),d.agencia_id==1&&o.cantidadAlmacen!==void 0?(g(),b("div",fe," Stock Almac\xE9n: "+n(o.cantidadAlmacen),1)):q("",!0)]),_:2},1024)]),_:2},1032,["onClick","class"])]))),128))])):q("",!0),d.last_page>1?(g(),b("div",xe,[e(G,{modelValue:d.current_page,"onUpdate:modelValue":[t[10]||(t[10]=o=>d.current_page=o),s.productsGet],max:d.last_page,"max-pages":6,"boundary-numbers":"","direction-links":"",color:"indigo","active-color":"indigo","active-text-color":"white"},null,8,["modelValue","max","onUpdate:modelValue"])])):!d.loading&&d.products.length===0?(g(),S(f,{key:3},{default:l(()=>[e(p,null,{default:l(()=>[a("div",Pe,[a("div",ye,[e(J,{size:"150px","font-size":"150px",color:"white","text-color":"grey",icon:"view_in_ar"})]),Ve])]),_:1})]),_:1})):q("",!0)]),_:1})]),_:1})])])]),a("div",we,[e(f,null,{default:l(()=>[e(p,{class:"q-pa-none q-ma-none"},{default:l(()=>[a("div",ke,[a("div",Se," Pedido ("+n(d.productosPedido.length)+") ",1),a("div",Ce,[e(u,{class:"text-subtitle1 text-blue-10 text-bold",style:{"text-decoration":"underline"},label:"Vaciar pedido",onClick:s.vaciarPedido,"no-caps":"",flat:"",outline:""},null,8,["onClick"])])])]),_:1}),e(Q),e(p,{class:"q-pa-none q-ma-none"},{default:l(()=>[d.productosPedido.length==0?(g(),b("div",qe,[e(P,{name:"o_shopping_basket",color:"grey",size:"100px"}),Ie])):(g(),S(K,{key:1,style:{height:"400px"}},{default:l(()=>[e(R,{dense:"",flat:"",bordered:"","hide-bottom":"","hide-header":"",rows:d.productosPedido,columns:d.columnsPedidos,"rows-per-page-options":[0]},{body:l(o=>[e(F,{props:o},{default:l(()=>[e(V,{key:"borrar",props:o,style:{padding:"0px",margin:"0px"},"auto-width":""},{default:l(()=>[e(u,{flat:"",dense:"",onClick:x=>s.deleteProductoPedido(o.row,o.pageIndex),icon:"delete",color:"red",size:"10px",class:"q-pa-none q-ma-none"},null,8,["onClick"])]),_:2},1032,["props"]),e(V,{key:"nombre",props:o},{default:l(()=>[a("div",null,[e(T,{src:o.row.imagen.includes("http")?o.row.imagen:`${i.$url}../images/${o.row.imagen}`,width:"40px",height:"40px",style:{padding:"0px",margin:"0px","border-radius":"0px",position:"absolute",crop:"auto","object-fit":"cover"}},null,8,["src"]),a("div",Ue,[a("div",Qe,n(o.row.nombre),1),a("div",Ae,"Stock Actual: "+n(o.row.cantidad),1)])])]),_:2},1032,["props"]),e(V,{key:"cantidadPedida",props:o},{default:l(()=>[e(v,{dense:"",outlined:"","bottom-slots":"",min:"1",modelValue:o.row.cantidadPedida,"onUpdate:modelValue":[x=>o.row.cantidadPedida=x,x=>s.cambioNumeroPedido(o.row,o.pageIndex)],rules:d.ruleNumber,type:"number","input-class":"text-center",required:""},{prepend:l(()=>[e(u,{style:{cursor:"pointer"},dense:"",flat:"",icon:"remove_circle_outline",onClick:x=>s.removeCantidadPedido(o.row,o.pageIndex)},null,8,["onClick"])]),append:l(()=>[e(u,{style:{cursor:"pointer"},dense:"",flat:"",icon:"add_circle_outline",onClick:x=>s.addCantidadPedido(o.row,o.pageIndex)},null,8,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","rules"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1}))]),_:1}),e(p,null,{default:l(()=>[e(B,{padding:"",bordered:"",dense:"",class:"rounded-borders full-width q-pa-none q-ma-none"},{default:l(()=>[e(W,{dense:"","dense-toggle":"","expand-separator":"",label:"Resumen"},{header:l(()=>[e(h,null,{default:l(()=>[c("Total Items")]),_:1}),e(h,{side:""},{default:l(()=>[a("div",Ne,n(s.totalItemsPedido),1)]),_:1})]),default:l(()=>[e(f,null,{default:l(()=>[e(p,null,{default:l(()=>[a("div",De,[Ge,a("div",ze,n(d.productosPedido.length),1),Ee,a("div",Re,n(s.totalItemsPedido),1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(u,{onClick:s.clickConfirmarPedido,class:"full-width","no-caps":"",label:"Confirmar pedido",color:d.productosPedido.length==0?"grey":"primary",disable:d.productosPedido.length==0,loading:d.loading},null,8,["onClick","color","disable","loading"])]),_:1})]),_:1})])]),e(N,{modelValue:d.pedidoDialog,"onUpdate:modelValue":t[15]||(t[15]=o=>d.pedidoDialog=o),persistent:""},{default:l(()=>[e(f,{style:{width:"850px","max-width":"90vw"}},{default:l(()=>[e(p,{class:"row items-center q-pb-none"},{default:l(()=>[Fe,e(A),w(e(u,{flat:"",round:"",dense:"",icon:"close"},null,512),[[k]])]),_:1}),e(O,{onSubmit:I(s.pedidoInsert,["prevent"])},{default:l(()=>[e(p,null,{default:l(()=>[a("div",Te,[a("div",Be,[e(v,{outlined:"",dense:"",label:"Solicitante",required:"",modelValue:d.pedido.solicitante,"onUpdate:modelValue":t[11]||(t[11]=o=>d.pedido.solicitante=o),style:{"text-transform":"uppercase"},readonly:""},null,8,["modelValue"])]),a("div",Oe,[e(v,{outlined:"",dense:"",label:"Sucursal","model-value":d.agenciaNombre,readonly:"","bg-color":"grey-2"},null,8,["model-value"])]),a("div",je,[e(y,{outlined:"",dense:"",label:"Proveedor para este pedido",modelValue:d.pedido.proveedor_id,"onUpdate:modelValue":[t[12]||(t[12]=o=>d.pedido.proveedor_id=o),s.cargarVendedores],options:d.proveedores,"option-value":"id","option-label":"nombreRazonSocial","emit-value":"","map-options":"","use-input":"",onFilter:s.filterProveedores,rules:[o=>!!o||"Debe seleccionar un proveedor"],"bg-color":"white"},{prepend:l(()=>[e(P,{name:"local_shipping"})]),_:1},8,["modelValue","options","onFilter","onUpdate:modelValue","rules"])]),a("div",Me,[e(y,{outlined:"",dense:"",label:"Vendedor (Opcional)",modelValue:d.pedido.vendedor_id,"onUpdate:modelValue":t[13]||(t[13]=o=>d.pedido.vendedor_id=o),options:d.vendedores,"option-value":"id","option-label":"nombre","emit-value":"","map-options":"","bg-color":"white",disable:!d.pedido.proveedor_id},{prepend:l(()=>[e(P,{name:"badge"})]),append:l(()=>[e(u,{round:"",dense:"",flat:"",icon:"add_circle",color:"green",onClick:I(s.abrirDialogoVendedor,["stop"]),disable:!d.pedido.proveedor_id},{default:l(()=>[e(U,null,{default:l(()=>[c("Crear nuevo vendedor aqu\xED")]),_:1})]),_:1},8,["onClick","disable"])]),"no-option":l(()=>[e(C,null,{default:l(()=>[e(h,{class:"text-grey"},{default:l(()=>[c(n(d.pedido.proveedor_id?"Sin vendedores registrados":"Seleccione proveedor primero"),1)]),_:1})]),_:1})]),option:l(o=>[e(C,X(Z(o.itemProps)),{default:l(()=>[e(h,null,{default:l(()=>[e(j,null,{default:l(()=>[c(n(o.opt.nombre),1)]),_:2},1024),e(j,{caption:""},{default:l(()=>[c(n(o.opt.celular),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","disable"])]),a("div",Le,[e(v,{outlined:"",dense:"",label:"Observaciones (Opcional)",modelValue:d.pedido.observacion,"onUpdate:modelValue":t[14]||(t[14]=o=>d.pedido.observacion=o),type:"textarea",rows:"2"},null,8,["modelValue"])])])]),_:1}),e(Q),e(p,null,{default:l(()=>[a("div",Ye,[a("div",He,[Je,e(R,{dense:"",rows:d.productosPedido,columns:d.columnsResumenPedido,"row-key":"id","hide-pagination":""},{body:l(o=>[e(F,{props:o},{default:l(()=>[e(V,{key:"producto"},{default:l(()=>[c(n(o.row.nombre),1)]),_:2},1024),e(V,{key:"stock"},{default:l(()=>[c(n(o.row.cantidad),1)]),_:2},1024),e(V,{key:"cantidad"},{default:l(()=>[c(n(o.row.cantidadPedida),1)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),a("div",Ke,[a("div",We,[c(" Total: "),a("strong",null,n(d.productosPedido.length),1),c(" productos | "),a("strong",null,n(s.totalItemsPedido),1),c(" unidades ")])])])]),_:1}),e(Q),e(p,null,{default:l(()=>[a("div",Xe,[a("div",Ze,[e(u,{type:"submit",class:"full-width",icon:"o_send",label:"Enviar pedido",loading:d.loading,"no-caps":"",color:"green"},null,8,["loading"])]),a("div",$e,[w(e(u,{class:"full-width",icon:"undo",label:"Atr\xE1s","no-caps":"",color:"red",loading:d.loading},null,8,["loading"]),[[k]])])])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),e(N,{modelValue:d.dialogVendedor,"onUpdate:modelValue":t[18]||(t[18]=o=>d.dialogVendedor=o),persistent:""},{default:l(()=>[e(f,{style:{"min-width":"350px"}},{default:l(()=>[e(p,{class:"row items-center"},{default:l(()=>[eo,e(A),w(e(u,{icon:"close",flat:"",round:"",dense:""},null,512),[[k]])]),_:1}),e(p,{class:"q-pt-none"},{default:l(()=>[e(O,{onSubmit:I(s.guardarNuevoVendedor,["prevent"])},{default:l(()=>[a("div",oo,[a("div",to,[lo,a("div",io,n(s.nombreProveedorActual),1)]),a("div",ao,[e(v,{outlined:"",dense:"",modelValue:d.nuevoVendedor.nombre,"onUpdate:modelValue":t[16]||(t[16]=o=>d.nuevoVendedor.nombre=o),label:"Nombre Completo",rules:[o=>!!o||"El nombre es obligatorio"],autofocus:""},null,8,["modelValue","rules"])]),a("div",so,[e(v,{outlined:"",dense:"",modelValue:d.nuevoVendedor.celular,"onUpdate:modelValue":t[17]||(t[17]=o=>d.nuevoVendedor.celular=o),label:"Celular",type:"number",rules:[o=>!!o||"El celular es obligatorio"]},null,8,["modelValue","rules"])])]),a("div",ro,[w(e(u,{label:"Cancelar",color:"grey",flat:"",class:"q-mr-sm"},null,512),[[k]]),e(u,{label:"Guardar y Seleccionar",color:"primary",type:"submit",loading:d.loadingVendedor},null,8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(N,{modelValue:d.dialogStock,"onUpdate:modelValue":t[19]||(t[19]=o=>d.dialogStock=o)},{default:l(()=>[e(f,{style:{"min-width":"350px","max-width":"90vw"}},{default:l(()=>[e(p,{class:"bg-indigo text-white row items-center"},{default:l(()=>[a("div",no,n(d.productStockSelected.nombre),1),e(A),w(e(u,{icon:"close",flat:"",round:"",dense:""},null,512),[[k]])]),_:1}),e(p,null,{default:l(()=>[co,e(B,{bordered:"",separator:"",dense:""},{default:l(()=>[e(C,null,{default:l(()=>[e(h,{avatar:""},{default:l(()=>[e(P,{name:"warehouse",color:"brown"})]),_:1}),e(h,null,{default:l(()=>[c("Almac\xE9n Central")]),_:1}),e(h,{side:""},{default:l(()=>[e(D,{color:d.productStockSelected.cantidadAlmacen>0?"green":"red"},{default:l(()=>[c(n(d.productStockSelected.cantidadAlmacen||0),1)]),_:1},8,["color"])]),_:1})]),_:1}),(g(!0),b(z,null,E(d.agencias,o=>(g(),S(C,{key:o.id},{default:l(()=>[e(h,{avatar:""},{default:l(()=>[e(P,{name:"store",color:"indigo"})]),_:1}),e(h,null,{default:l(()=>[c(n(o.nombre),1)]),_:2},1024),e(h,{side:""},{default:l(()=>[e(D,{color:(d.productStockSelected["cantidadSucursal"+o.id]||0)>0?"blue":"grey"},{default:l(()=>[c(n(d.productStockSelected["cantidadSucursal"+o.id]||0),1)]),_:2},1032,["color"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e($,{align:"right"},{default:l(()=>[w(e(u,{flat:"",label:"Cerrar",color:"indigo"},null,512),[[k]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var go=L(de,[["render",uo],["__scopeId","data-v-68f69dc4"]]);export{go as default};
