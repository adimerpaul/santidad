import{c as Y,av as se,aw as oe,a as L,h as P,Q as V,t as ae,aT as re,aU as ie,aV as ne,f as ce,_ as le,aW as de,q as ue,$ as g,a0 as D,a1 as m,a2 as a,a3 as n,a8 as q,ad as M,af as h,ac as B,ag as j,a4 as I,a5 as me,a7 as he,aa as J,a9 as X,aX as pe,ah as ge,ak as fe,al as _e}from"./index.fb260048.js";import{Q}from"./QSkeleton.1e147efd.js";import{Q as $}from"./QBadge.0bfdfcf5.js";import{Q as H}from"./QImg.cd600aa8.js";import{Q as T}from"./QChip.eca5c92a.js";import{a as be,Q as U}from"./QItemSection.960b9af9.js";import{Q as W}from"./QItemLabel.a36c09a8.js";import{Q as ve}from"./QList.ba2077d9.js";import{Q as ye}from"./QSpinnerDots.de3b16d7.js";import{Q as ke}from"./QPage.818978b9.js";import{u as Se}from"./use-meta.78c6e1d9.js";var Z=Y({name:"QBreadcrumbsEl",props:{...se,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(e,{slots:t}){const{linkTag:o,linkAttrs:c,linkClass:s,navigateOnClick:i}=oe(),C=L(()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(e.disable!==!0?"q-link--focusable"+s.value:"q-breadcrumbs__el--disable"),...c.value,onClick:i})),x=L(()=>"q-breadcrumbs__el-icon"+(e.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const v=[];return e.icon!==void 0&&v.push(P(V,{class:x.value,name:e.icon})),e.label!==void 0&&v.push(e.label),P(o.value,{...C.value},ae(t.default,v))}}});const we=["",!0];var Ce=Y({name:"QBreadcrumbs",props:{...re,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:e=>["none","xs","sm","md","lg","xl"].includes(e),default:"sm"}},setup(e,{slots:t}){const o=ie(e),c=L(()=>`flex items-center ${o.value}${e.gutter==="none"?"":` q-gutter-${e.gutter}`}`),s=L(()=>e.separatorColor?` text-${e.separatorColor}`:""),i=L(()=>` text-${e.activeColor}`);return()=>{const C=ne(ce(t.default));if(C.length===0)return;let x=1;const v=[],b=C.filter(l=>l.type!==void 0&&l.type.name==="QBreadcrumbsEl").length,r=t.separator!==void 0?t.separator:()=>e.separator;return C.forEach(l=>{if(l.type!==void 0&&l.type.name==="QBreadcrumbsEl"){const p=x<b,y=l.props!==null&&we.includes(l.props.disable),k=(p===!0?"":" q-breadcrumbs--last")+(y!==!0&&p===!0?i.value:"");x++,v.push(P("div",{class:`flex items-center${k}`},[l])),p===!0&&v.push(P("div",{class:"q-breadcrumbs__separator"+s.value},r()))}else v.push(l)}),P("div",{class:"q-breadcrumbs"},[P("div",{class:c.value},v)])}}});const z="https://farmaciasantidaddivina.com",xe={name:"DetalleProducto",data(){return{id:this.$route.params.id,product:{},loading:!0,cantidad:1,es_porcentaje:!1,sucursales:[],relacionados:[],relLoading:!1,fallbackUsed:!1,apiError:!1,imgBust:Date.now(),imgReady:!1,zoom:{on:!1,x:50,y:50},reqSeq:0}},setup(){const e=de(),t="Santidad Divina | Farmacia Santidad Divina",o=new URL(e.path||"/",z).toString();return Se({title:t,meta:{description:{name:"description",content:"Compra este producto en Farmacia Santidad Divina. Entrega r\xE1pida y precios solidarios."},robots:{name:"robots",content:"index, follow, max-image-preview:large"},"og:type":{property:"og:type",content:"product"},"og:title":{property:"og:title",content:t},"og:description":{property:"og:description",content:"Compra este producto en Farmacia Santidad Divina. Entrega r\xE1pida y precios solidarios."},"og:site_name":{property:"og:site_name",content:"Farmacia Santidad Divina"},"og:locale":{property:"og:locale",content:"es_BO"},"og:url":{property:"og:url",content:o},"twitter:card":{name:"twitter:card",content:"summary_large_image"}},link:{canonical:{rel:"canonical",href:o}}}),{}},computed:{detailKey(){return`${this.id}-${this.imgBust}`},imgKey(){var e;return`${this.id}-${((e=this.product)==null?void 0:e.imagen)||"noimg"}-${this.imgBust}`},imgSrc(){var o;const e=(o=this.product)==null?void 0:o.imagen;let t=e?String(e).includes("http")?e:`${this.$url}../images/${e}`:"/images/placeholder-producto.png";return t+=(t.includes("?")?"&":"?")+"v="+this.imgBust,t},ahorro(){var o,c;if(!this.es_porcentaje)return"0.00";const e=Number(((o=this.product)==null?void 0:o.precioNormal)||0),t=Number(((c=this.product)==null?void 0:c.precio)||0);return(e-t).toFixed(2)},total(){var t;return(Number(((t=this.product)==null?void 0:t.precio)||0)*(Number(this.cantidad)||0)).toFixed(2)},availableStock(){return this.sucursales.reduce((e,t)=>e+Number(t.cantidad||0),0)},stockMostrado(){const e=this.availableStock;return e>100?100:e},zoomImgStyle(){const e={transition:"transform .15s ease-out, transform-origin .1s ease-out",willChange:"transform"};return this.zoom.on?(e.transform="scale(2)",e.transformOrigin=`${this.zoom.x}% ${this.zoom.y}%`,e.cursor="zoom-out"):(e.transform="scale(1)",e.transformOrigin="center center",e.cursor="zoom-in"),e}},watch:{"$route.params.id":{async handler(e){this.id=e,window.scrollTo({top:0,behavior:"smooth"}),await this.prepareForNewProduct(),await this.initLoad()}},"product.imagen"(){this.bumpImg()}},async mounted(){await this.initLoad()},methods:{abs(e){return e?/^https?:\/\//i.test(e)?e:e.startsWith("/")?`${z}${e}`:`${z}/images/${e}`:`${z}/images/placeholder-producto.png`},cleanText(e=""){return String(e).replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim()},seoTitleFrom(e){const t=(e==null?void 0:e.nombre)||"Santidad Divina",o=e!=null&&e.presentacion?` ${e.presentacion}`:"",c=e!=null&&e.marca?` | ${e.marca}`:"";return`${t}${o}${c} | Farmacia Santidad Divina`},seoDescFrom(e){const t=this.cleanText((e==null?void 0:e.descripcion)||"");return(t?`${t} Producto disponible en Farmacia Santidad Divina. Compra online en Oruro.`:`Compra ${(e==null?void 0:e.nombre)||"este producto"} en Farmacia Santidad Divina. Entrega r\xE1pida y precios solidarios.`).substring(0,155)},ensureMetaName(e,t){let o=document.head.querySelector(`meta[name="${e}"]`);o||(o=document.createElement("meta"),o.setAttribute("name",e),document.head.appendChild(o)),o.setAttribute("content",t||"")},ensureMetaProp(e,t){let o=document.head.querySelector(`meta[property="${e}"]`);o||(o=document.createElement("meta"),o.setAttribute("property",e),document.head.appendChild(o)),o.setAttribute("content",t||"")},ensureCanonical(e){let t=document.head.querySelector('link[rel="canonical"]');t||(t=document.createElement("link"),t.setAttribute("rel","canonical"),document.head.appendChild(t)),t.setAttribute("href",e)},setJsonLd(e,t){let o=document.getElementById(e);o||(o=document.createElement("script"),o.type="application/ld+json",o.id=e,document.head.appendChild(o)),o.textContent=JSON.stringify(t)},applySEO(){var i;const e=this.product||{},t=this.seoTitleFrom(e),o=this.seoDescFrom(e),c=this.abs(e==null?void 0:e.imagen),s=new URL(this.$route.path||"/",z).toString();document.title=t,this.ensureMetaName("description",o),this.ensureMetaName("keywords",["farmacia","medicamento","salud","Bolivia",e==null?void 0:e.nombre,e==null?void 0:e.marca,e==null?void 0:e.composicion].filter(Boolean).join(", ")),this.ensureMetaName("robots","index, follow, max-image-preview:large"),this.ensureMetaName("author","Farmacia Santidad Divina"),this.ensureMetaName("publisher","Farmacia Santidad Divina"),this.ensureMetaProp("og:site_name","Farmacia Santidad Divina"),this.ensureMetaProp("og:locale","es_BO"),this.ensureMetaProp("og:type","product"),this.ensureMetaProp("og:title",t),this.ensureMetaProp("og:description",o),this.ensureMetaProp("og:image",c),this.ensureMetaProp("og:image:secure_url",c),this.ensureMetaProp("og:url",s),this.ensureMetaName("twitter:card","summary_large_image"),this.ensureMetaName("twitter:title",t),this.ensureMetaName("twitter:description",o),this.ensureMetaName("twitter:image",c),this.ensureCanonical(s),this.setJsonLd("ld-product",{"@context":"https://schema.org","@type":"Product",name:(e==null?void 0:e.nombre)||"Producto",description:o,image:[c],sku:(e==null?void 0:e.sku)||void 0,brand:e!=null&&e.marca?{"@type":"Brand",name:e.marca}:void 0,offers:{"@type":"Offer",priceCurrency:"BOB",price:String((i=e==null?void 0:e.precio)!=null?i:""),availability:(Number(e==null?void 0:e.stock)||0)>0?"https://schema.org/InStock":"https://schema.org/OutOfStock",url:s}}),this.setJsonLd("ld-breadcrumbs",{"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Inicio",item:z},{"@type":"ListItem",position:3,name:(e==null?void 0:e.nombre)||"Producto",item:s}]})},async prepareForNewProduct(){this.imgReady=!1,this.imgBust=Date.now(),this.fallbackUsed=!1,this.product={},this.es_porcentaje=!1,this.cantidad=1,this.sucursales=this.sucursales.map(e=>({...e,cantidad:0})),this.zoom={on:!1,x:50,y:50},await ue()},bumpImg(){this.imgBust=Date.now()},async initLoad(){(!this.sucursales||this.sucursales.length===0)&&await this.getSucursales(),await this.getProduct(),await this.fetchRelacionados()},toggleDrawer(){this.drawer=!this.drawer},navigateTo(e){this.$router.push(e),this.drawer=!1},buscar(){const e=(this.search||"").trim();!e||(this.$router.push({name:"buscar",query:{q:e,page:1}}),this.drawer=!1)},onImgError(e){this.fallbackUsed||(this.fallbackUsed=!0,e!=null&&e.target&&(e.target.src="/images/placeholder-producto.png"),this.bumpImg())},resolveImage(e){return e?String(e).includes("http")?e:`${this.$url}../images/${e}`:"/images/placeholder-producto.png"},handleZoomMove(e){const o=e.currentTarget.getBoundingClientRect(),c=(e.clientX-o.left)/o.width*100,s=(e.clientY-o.top)/o.height*100;this.zoom.x=Math.max(0,Math.min(100,c)),this.zoom.y=Math.max(0,Math.min(100,s))},async getSucursales(){const{data:e}=await this.$axios.get("sucursales");this.sucursales=(e||[]).map(t=>({...t,cantidad:Number(t.cantidad||0)}))},async getProduct(){var o,c;const e=this.$route.params.id;if(!e)return;const t=++this.reqSeq;this.loading=!0,this.$q.loading.show();try{const{data:s}=await this.$axios.get(`productos/${e}`);if(t!==this.reqSeq)return;this.product={...s},Number(this.product.porcentaje)>0?(this.es_porcentaje=!0,this.product.precioNormal=this.product.precio,this.product.precio=(this.product.precio-this.product.precio*this.product.porcentaje/100).toFixed(2)):this.es_porcentaje=!1,this.sucursales=this.sucursales.map(i=>({...i,cantidad:Number(this.product[`cantidadSucursal${i.id}`]||0)})),this.cantidad=1,this.fallbackUsed=!1,this.bumpImg(),this.imgReady=!0,this.applySEO()}catch(s){if(t!==this.reqSeq)return;this.apiError=!0,this.$q.notify({type:"negative",message:((c=(o=s==null?void 0:s.response)==null?void 0:o.data)==null?void 0:c.message)||"Error cargando producto"})}finally{t===this.reqSeq&&(this.loading=!1,this.$q.loading.hide())}},async fetchRelacionados(){var t,o;const e=(((t=this.product)==null?void 0:t.composicion)||"").trim();if(this.relacionados=[],!!e){this.relLoading=!0;try{const s=Number(this.product.id),i=Number((o=this.product)==null?void 0:o.subcategory_id)||null,C=!0,x=(d="")=>String(d).normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/([a-z])(\d)/gi,"$1 $2").replace(/(\d)([a-z])/gi,"$1 $2").replace(/[^a-z0-9\s]/g," ").replace(/\s+/g," ").trim(),v=(d="")=>this.norm(String(d).replace(/([a-z])(\d)/gi,"$1 $2").replace(/(\d)([a-z])/gi,"$1 $2")),b=(d="")=>{const u=/\b(\d+(?:[.,]\d+)?)\s*(mg|ml|mcg|Âµg|ug|g|gr|kg|l|ui|%)\b/gi,f=[];let N;for(;(N=u.exec(String(d)))!==null;){const w=String(parseFloat(N[1].replace(",","."))),F=N[2].toLowerCase();f.push(`${w}${F}`)}return f.sort().join("|")},r=b(e),l=x(e),p=Array.from(new Set(l.split(" ").filter(d=>d&&d.length>=3))),y=[];l&&y.push({search:l}),p.slice(0,5).forEach(d=>y.push({search:d})),i&&y.push({subcategory_id:i});const k=y.map(d=>this.$axios.get("productos",{params:{...d,page:1,per_page:200}}).then(({data:u})=>{var f;return(u==null?void 0:u.data)||((f=u==null?void 0:u.products)==null?void 0:f.data)||u||[]}).catch(()=>[])),S=await Promise.all(k),E=new Map;for(const d of S)for(const u of d){const f=Number(u==null?void 0:u.id);!f||f===s||E.has(f)||E.set(f,u)}const A=Array.from(E.values());if(A.length===0){this.relacionados=[];return}const G=v(e),ee=.55,te=.35,O=[];for(const d of A){if(C&&r&&b(d.composicion||d.nombre||"")!==r)continue;const u=v(d.composicion||d.nombre||""),f=this.similarity(G,u),N=Boolean((d.composicion||"").trim()),w=N?f:Math.min(f+.2,.5);w>0&&O.push({p:d,score:w,hasComp:N})}O.sort((d,u)=>{if(u.score!==d.score)return u.score-d.score;const f=Number(d.p.subcategory_id)===i?1:0,N=Number(u.p.subcategory_id)===i?1:0;if(N!==f)return N-f;const w=Number(d.p.precio)||0,F=Number(u.p.precio)||0;return w-F});const K=new Set,R=[];for(const{p:d,score:u,hasComp:f}of O){if(!(f?u>=ee:u>=te)||K.has(d.id))continue;const w={...d};if(Number(w.porcentaje)>0&&(w.precioNormal=w.precio,w.precio=(w.precio-w.precio*w.porcentaje/100).toFixed(2)),R.push(w),K.add(d.id),R.length>=50)break}this.relacionados=R}catch(c){console.error("Error cargando relacionados",c),this.relacionados=[]}finally{this.relLoading=!1}}},norm(e){let t=String(e).normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/([a-z])(\d)/gi,"$1 $2").replace(/(\d)([a-z])/gi,"$1 $2");const o={ibuproneo:"ibuprofeno",acetaminofen:"paracetamol",dc:"compresion directa",sr:"liberacion sostenida",gr:"gastroresistente",reistente:"gastroresistente"};for(const[c,s]of Object.entries(o))t=t.replace(new RegExp(`\\b${c}\\b`,"g"),s);return t=t.replace(/\bgastro\s+resistente\b/g,"gastroresistente"),t.replace(/[^a-z0-9\s]/g," ").replace(/\b(comprimidos?|tabletas?|capsulas?|capsula[s]?|solucion|jarabe|unguento|crema|spray)\b/g," ").replace(/\s+/g," ").trim()},similarity(e,t){if(!e||!t)return 0;const o=Array.from(new Set(e.split(" ").filter(Boolean))),c=Array.from(new Set(t.split(" ").filter(Boolean)));if(!o.length||!c.length)return 0;const s=(b,r)=>{if(b===r)return 0;const l=b.length,p=r.length;if(!l)return p;if(!p)return l;const y=Array.from({length:l+1},(k,S)=>Array.from({length:p+1},(E,A)=>S===0?A:A===0?S:0));for(let k=1;k<=l;k++)for(let S=1;S<=p;S++){const E=b[k-1]===r[S-1]?0:1;y[k][S]=Math.min(y[k-1][S]+1,y[k][S-1]+1,y[k-1][S-1]+E)}return y[l][p]},i=(b,r)=>{if(b===r)return!0;const l=s(b,r),p=Math.max(b.length,r.length);return p<=4?l<=1:p<=7?l<=2:l<=3},C=new Set;let x=0;for(const b of o)for(let r=0;r<c.length;r++)if(!C.has(r)&&i(b,c[r])){C.add(r),x++;break}const v=new Set([...o,...c]).size||1;return x/v},clickDetalleProducto(e){String(e.id)!==String(this.id)&&this.$router.push("/detalle-producto/"+e.id+"/"+this.slugify(e.nombre))},slugify(e){return String(e).replace(/ |\/|\./g,"-").replace(/,/g,"")},onCantidadBlur(){const e=Number(this.cantidad);(!Number.isFinite(e)||e<1)&&(this.cantidad=1)},decCantidad(){this.cantidad=Math.max(1,Number(this.cantidad||1)-1)},incCantidad(){const e=this.availableStock,t=Number(this.cantidad||1)+1;this.cantidad=Math.min(t,e||t)},async addCarrito(e,t){var s,i;if(!await this.checkStockBeforeAdd(t))return;const c={...e,cantidad:t};this.$store.addCarrito(c),(i=(s=this.$alert)==null?void 0:s.success)==null||i.call(s,"Producto a\xF1adido al carrito")},async addCart(e,t){if(!await this.checkStockBeforeAdd(t))return;const c=`Deseo comprar ${t} ${e.nombre} a Bs. ${e.precio} c/u. Total Bs. ${(e.precio*t).toFixed(2)}`;window.open(`https://wa.me/59172319869?text=${encodeURIComponent(c)}`)},async checkStockBeforeAdd(e){const t=this.availableStock,o=Number(e||0);return!Number.isFinite(o)||o<1?(this.$q.notify({type:"warning",message:"Cantidad inv\xE1lida (m\xEDnimo 1)."}),!1):o>t?(this.$q.notify({type:"negative",message:`Stock insuficiente. Disponible: ${t}.`}),!1):!0},share(){var t,o;const e={title:(t=this.product)==null?void 0:t.nombre,text:(o=this.product)==null?void 0:o.descripcion,url:window.location.href};navigator.share?navigator.share(e).catch(()=>{}):this.$q.notify({message:"Compartir no soportado en este dispositivo",color:"grey-7"})}}},_=e=>(fe("data-v-74569461"),e=e(),_e(),e),qe=_(()=>a("div",{class:"page-spacer"},null,-1)),Ne={class:"container q-px-md q-mx-auto"},Me={key:0,class:"q-mt-lg"},Be={class:"row q-col-gutter-xl"},De={class:"col-12 col-md-5"},Ie={class:"col-12 col-md-7"},Ee={class:"col-12 col-md-5 flex items-start justify-center"},Qe={class:"zoom-hint"},ze={class:"media-actions"},Pe={class:"col-12 col-md-7"},Ae={class:"product-title"},Le={class:"price-card q-mt-sm q-mb-md"},Fe={class:"now grad-pill"},je={key:0,class:"before"},Te={class:"meta-row"},Oe=_(()=>a("span",{class:"meta-key"},"Unidad",-1)),Re={class:"meta-val"},$e={class:"meta-row"},Ue=_(()=>a("span",{class:"meta-key"},"Principio activo",-1)),Ve={class:"meta-val"},Ke={class:"meta-row"},Je=_(()=>a("span",{class:"meta-key"},"Distribuidora",-1)),Xe={class:"meta-val"},He={class:"meta-row"},We=_(()=>a("span",{class:"meta-key"},"Laboratorio",-1)),Ze={class:"meta-val"},Ye={class:"meta-row"},Ge=_(()=>a("span",{class:"meta-key"},"Pa\xEDs origen",-1)),et={class:"meta-val"},tt={class:"meta-row"},st=_(()=>a("span",{class:"meta-key"},"Reg. sanitario",-1)),ot={class:"meta-val"},at={class:"qty-row q-mb-md"},rt=_(()=>a("div",{class:"qty-title"},"Cantidad",-1)),it={class:"qty-controls glass soft-shadow"},nt={class:"qty-unit"},ct={class:"total-box glass soft-shadow"},lt=_(()=>a("div",{class:"total-label"},"Total",-1)),dt={class:"total-value"},ut={class:"row q-col-gutter-sm"},mt={class:"col-12 col-sm-4"},ht={class:"col-12 col-sm-4"},pt={class:"q-mt-xl"},gt=_(()=>a("div",{class:"section-title"},"Descripci\xF3n",-1)),ft=["innerHTML"],_t={class:"q-mt-xl"},bt=_(()=>a("div",{class:"section-title"},"Disponibilidad en sucursales",-1)),vt={class:"q-mt-xl"},yt=_(()=>a("div",{class:"section-title"},"Productos relacionados",-1)),kt={key:0,class:"text-center q-my-lg"},St={key:1,class:"text-grey-6 q-mt-sm"},wt={key:2,class:"contenedor-productos q-mt-md"},Ct={class:"products-grid"},xt={key:0,class:"out-of-stock-overlay"},qt=_(()=>a("span",{class:"out-of-stock-text"},"Sin Stock",-1)),Nt=[qt],Mt={class:"product-name"},Bt={class:"product-prices"},Dt={key:0,class:"price-old"},It=_(()=>a("span",null,"Antes",-1)),Et=_(()=>a("br",null,null,-1)),Qt={class:"price-now"},zt=_(()=>a("span",null,"Ahora",-1)),Pt=_(()=>a("br",null,null,-1)),At={key:0,class:"sticky-cta glass soft-shadow"},Lt={class:"sticky-price"},Ft=_(()=>a("div",{class:"label"},"Total",-1)),jt={class:"value"},Tt={class:"sticky-actions"},Ot={class:"sticky-stepper"},Rt={class:"sticky-qty"};function $t(e,t,o,c,s,i){return g(),D(ke,{class:"q-pa-none modern-bg"},{default:m(()=>{var C,x,v,b;return[qe,a("div",Ne,[n(Ce,{class:"q-mb-md text-grey-6"},{default:m(()=>{var r;return[n(Z,{label:"Inicio",to:"/"}),n(Z,{label:((r=s.product)==null?void 0:r.nombre)||"Detalle"},null,8,["label"])]}),_:1}),s.loading?(g(),q("div",Me,[a("div",Be,[a("div",De,[n(Q,{type:"rect",class:"skeleton-media"})]),a("div",Ie,[n(Q,{type:"text",class:"q-mb-sm"}),n(Q,{type:"text",width:"60%",class:"q-mb-md"}),n(Q,{type:"rect",height:"140px",class:"q-mb-md"}),n(Q,{type:"text"}),n(Q,{type:"text",width:"70%"})])])])):(g(),q("div",{class:"row q-col-gutter-xl",key:i.detailKey},[a("div",Ee,[n(j,{flat:"",class:"media-wrap glass soft-shadow"},{default:m(()=>{var r,l;return[s.imgReady?(g(),q("div",{key:0,class:"zoom-area",onMousemove:t[0]||(t[0]=(...p)=>i.handleZoomMove&&i.handleZoomMove(...p)),onMouseenter:t[1]||(t[1]=p=>s.zoom.on=!0),onMouseleave:t[2]||(t[2]=p=>s.zoom.on=!1)},[(g(),D(H,{key:i.imgKey,src:i.imgSrc,ratio:4/3,fit:"contain",class:"media-img","img-style":i.zoomImgStyle,onError:i.onImgError,alt:(r=s.product)!=null&&r.nombre?`Imagen de ${s.product.nombre}`:"Imagen de producto",title:((l=s.product)==null?void 0:l.nombre)||"Producto"},{default:m(()=>[s.es_porcentaje?(g(),D($,{key:0,color:"red",floating:"",class:"text-bold"},{default:m(()=>[M("-"+h(s.product.porcentaje)+"%",1)]),_:1})):B("",!0)]),_:1},8,["src","img-style","onError","alt","title"])),a("div",Qe,[n(V,{name:"search",size:"18px"})])],32)):B("",!0),a("div",ze,[n(T,{dense:"",outline:"",icon:"photo",color:"primary"},{default:m(()=>[M("Vista")]),_:1}),n(T,{dense:"",outline:"",icon:"verified",color:"teal"},{default:m(()=>[M("Original")]),_:1})])]}),_:1})]),a("div",Pe,[a("h1",Ae,h((C=s.product)==null?void 0:C.nombre),1),a("div",Le,[a("div",Fe,"Bs. "+h((x=s.product)==null?void 0:x.precio),1),s.es_porcentaje?(g(),q("div",je,"Antes: Bs. "+h((v=s.product)==null?void 0:v.precioNormal),1)):B("",!0),s.es_porcentaje?(g(),D(T,{key:1,color:"negative","text-color":"white",size:"sm",class:"q-ml-sm"},{default:m(()=>[M(" Ahorra Bs. "+h(i.ahorro),1)]),_:1})):B("",!0),n(T,{color:i.availableStock>0?"green-5":"grey-6","text-color":"white",size:"sm",class:"q-ml-sm"},{default:m(()=>[M(" Stock: "+h(i.stockMostrado),1)]),_:1},8,["color"])]),n(j,{flat:"",class:"meta-grid glass soft-shadow q-mb-md"},{default:m(()=>{var r,l,p,y,k,S;return[a("div",Te,[Oe,a("span",Re,h(((r=s.product)==null?void 0:r.unidad)||"-"),1)]),a("div",$e,[Ue,a("span",Ve,h(((l=s.product)==null?void 0:l.composicion)||"-"),1)]),a("div",Ke,[Je,a("span",Xe,h(((p=s.product)==null?void 0:p.distribuidora)||"-"),1)]),a("div",He,[We,a("span",Ze,h(((y=s.product)==null?void 0:y.marca)||"-"),1)]),a("div",Ye,[Ge,a("span",et,h(((k=s.product)==null?void 0:k.paisOrigen)||"-"),1)]),a("div",tt,[st,a("span",ot,h(((S=s.product)==null?void 0:S.registroSanitario)||"-"),1)])]}),_:1}),a("div",at,[rt,a("div",it,[n(I,{round:"",unelevated:"",icon:"remove",class:"qty-btn",color:"primary",onClick:i.decCantidad,disable:s.cantidad<=1},null,8,["onClick","disable"]),n(he,{modelValue:s.cantidad,"onUpdate:modelValue":t[3]||(t[3]=r=>s.cantidad=r),modelModifiers:{number:!0},type:"number",inputmode:"numeric",dense:"",borderless:"",class:"qty-input",onBlur:i.onCantidadBlur,onKeyup:t[4]||(t[4]=me(r=>i.addCarrito(s.product,s.cantidad),["enter"])),"aria-live":"polite"},null,8,["modelValue","onBlur"]),n(I,{round:"",unelevated:"",icon:"add",class:"qty-btn",color:"primary",onClick:i.incCantidad,disable:i.availableStock<=0||s.cantidad>=i.availableStock},null,8,["onClick","disable"]),a("div",nt,h((b=s.product)==null?void 0:b.unidad),1)]),a("div",ct,[lt,a("div",dt,"Bs. "+h(i.total),1)])]),a("div",ut,[a("div",mt,[n(I,{class:"full-width grad-btn big-cta",icon:"add_shopping_cart",label:"A\xF1adir al carrito","no-caps":"",onClick:t[5]||(t[5]=r=>i.addCarrito(s.product,s.cantidad)),disable:i.availableStock===0},null,8,["disable"])]),a("div",ht,[n(I,{class:"full-width glass-btn big-cta",icon:"share",label:"Compartir","no-caps":"",onClick:i.share},null,8,["onClick"])])])])])),a("div",pt,[gt,n(j,{flat:"",class:"glass soft-shadow q-pa-md"},{default:m(()=>{var r;return[a("div",{class:"descripcion",innerHTML:(r=s.product)==null?void 0:r.descripcion},null,8,ft)]}),_:1})]),a("div",_t,[bt,n(ve,{bordered:"",separator:"",class:"rounded-borders glass soft-shadow"},{default:m(()=>[(g(!0),q(X,null,J(s.sucursales,r=>(g(),D(be,{key:r.id},{default:m(()=>[n(U,{avatar:""},{default:m(()=>[n(pe,{size:"28px",color:"blue-1","text-color":"primary"},{default:m(()=>[n(V,{name:"store"})]),_:1})]),_:1}),n(U,null,{default:m(()=>[n(W,{class:"text-weight-medium"},{default:m(()=>[M(h(r.nombre),1)]),_:2},1024),n(W,{caption:""},{default:m(()=>[M(h(r.direccion),1)]),_:2},1024)]),_:2},1024),n(U,{side:""},{default:m(()=>[n($,{color:r.cantidad>0?"green":"grey",label:r.cantidad>0?"Disponible":"Sin stock"},null,8,["color","label"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),a("div",vt,[yt,s.relLoading?(g(),q("div",kt,[n(ye,{size:"50px",color:"primary"})])):s.relacionados.length===0?(g(),q("div",St," No se encontraron productos con composici\xF3n similar. ")):(g(),q("div",wt,[a("div",Ct,[(g(!0),q(X,null,J(s.relacionados,r=>(g(),D(j,{key:r.id,class:"product-card-personalizada glass soft-shadow hover-pop",flat:"",onClick:l=>i.clickDetalleProducto(r)},{default:m(()=>[n(H,{src:i.resolveImage(r.imagen),style:{height:"160px","object-fit":"cover",position:"relative"}},{default:m(()=>[Number(r.cantidad||0)===0?(g(),q("div",xt,Nt)):B("",!0),Number(r.porcentaje)>0?(g(),D($,{key:1,color:"red",floating:""},{default:m(()=>[M("-"+h(r.porcentaje)+"%",1)]),_:2},1024)):B("",!0)]),_:2},1032,["src"]),n(ge,{class:"q-pa-sm text-center"},{default:m(()=>[a("div",Mt,h(r.nombre),1),a("div",Bt,[r.precioNormal?(g(),q("div",Dt,[It,Et,a("strong",null,"Bs. "+h(r.precioNormal),1)])):B("",!0),a("div",Qt,[zt,Pt,a("strong",null,"Bs. "+h(r.precio),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]))])]),s.loading?B("",!0):(g(),q("div",At,[a("div",Lt,[Ft,a("div",jt,"Bs. "+h(i.total),1)]),a("div",Tt,[a("div",Ot,[n(I,{round:"",dense:"",icon:"remove",color:"primary",onClick:i.decCantidad,disable:s.cantidad<=1},null,8,["onClick","disable"]),a("div",Rt,h(s.cantidad),1),n(I,{round:"",dense:"",icon:"add",color:"primary",onClick:i.incCantidad,disable:i.availableStock<=0||s.cantidad>=i.availableStock},null,8,["onClick","disable"])]),n(I,{class:"grad-btn",icon:"add_shopping_cart",label:"A\xF1adir","no-caps":"",onClick:t[6]||(t[6]=r=>i.addCarrito(s.product,s.cantidad)),disable:i.availableStock===0},null,8,["disable"])])]))]}),_:1})}var ts=le(xe,[["render",$t],["__scopeId","data-v-74569461"]]);export{ts as default};
